## 1. 启动

```
npm i -g utoo

ut

ut start
```

- 打开: http://localhost:8001

## 2. 关键词

- workspaces 工作区
- monorepo 单体仓库

## 3. workspaces

### 1. 什么是 workspaces

Workspaces 是 npm（v7+）、Yarn、pnpm 等包管理器提供的多包管理机制，特点包括：

- **集中管理**：多个包可以在一个仓库中管理，方便协同开发
- **依赖提升**：npm 会将子包中相同的依赖提升到根目录的 `node_modules` 中，减少重复安装
- **跨包链接**：workspaces 内的包可以相互引用，就像发布到 npm 上的包一样，但实际上是链接到本地代码
- **统一执行**：可以统一执行所有子包的脚本命令

**目的**：使得处理本地文件系统中链接包的工作流程更加简化。它自动化了 `npm link` 时的链接过程，并免除了手动使用 `npm link` 来添加符号链接到当前 `node_modules` 文件夹的包引用的需求。

**实现原理**：实际上就是把 workspaces 定义的子包符号链接到当前工作目录的 `node_modules` 文件夹。

### 2. 项目配置

在根目录的 `package.json` 中定义 `workspaces` 字段，指定子包的位置：

```json
{
  "workspaces": ["packages/*"]
}
```

这表示 `packages/` 目录下的所有子目录都是独立的包。

### 3. 常用命令

```bash
# 安装所有依赖（根目录和所有子包）
npm install

# 在所有子包中执行编译
npm run compile --workspaces

# 在所有子包中执行 lint
npm run lint --workspaces

# 在所有子包中执行测试
npm run test --workspaces

# 在特定子包中执行命令
npm run <script> --workspace=packages/<package-name>

# 子包安装依赖
npm install <package> -w packages/package-a
```

### 4. 相关资料

- [npm workspaces 官方文档](https://docs.npmjs.com/cli/v10/using-npm/workspaces)
- [Yarn workspaces](https://yarnpkg.com/features/workspaces)
- [pnpm workspaces](https://pnpm.io/workspaces)

## 4. 提交到我的仓库

```
git push chiaki main
```
